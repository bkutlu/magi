extends header
block body
  div(class="container")
    img(src="img/cgat.svg", id="splash-logo")
    h1(id="splash-header") Cancer Genomics Analysis Tool
    div(id="splash-txt")
      p CGAT is a tool for exploring and analyzing gene sets that may be
        | associated with cancer.
      p The tool was authored by the <a href="http://compbio.cs.brown.edu/">Raphael Lab</a> and the
        | <a href="http://vrl.cs.brown.edu/">Visualization Research Lab</a> at Brown University.
    div(id="splash-img")

  div(class="container-fluid", id="input-chooser")
    form(method="post", action="/", role="form", id="query-form")
      div(id="gene-chooser")
        h4 Enter or upload gene set.
        br
        label
          | Upload text file. &nbsp;
          small Genes will appear in the box below.
        input(type="file", id="geneSet", name="geneSet", style="display:inline")
        br
        br
        label
          | Enter genes.
        textarea(id="genes-list", name="genes", class="form-control", rows="10")
          | STAG1
          | STAG2
          | SMC1A
          | SMC3
          | RAD21
        br
        button(type="submit", id="submit", class="btn btn-default") Submit
        br
        br
        div(id="status")

      div(id="db-chooser")
        h4 Choose dataset.
        a(href="/upload") Upload your own.
        br
        br
        -var seenStandard = false;
        -var seenUser = false;
        -for (var i in groups)
          -var group = groups[i];
          //- Create a horizontal break if this is the first standard/user dataset
          -if (group.groupClass == "standard" && !seenStandard)
            - seenStandard = true;
            hr
            h4 Provided datasets
          -if (group.groupClass == "user" && !seenUser)
            - seenUser = true;
            hr
            h4 Your datasets

          // Determine whether the datasets are part of a group
          - if (group.name != "")
            - groupClass = "groupedClass"
            input(type="checkbox", style="float:right;", onclick="toggleCheckboxes('#{i}', this.checked );")
            h5(onclick="toggleGroup(this, '#{i}')", style="cursor:pointer") #{group.name} &nbsp;
              span(class="glyphicon glyphicon-chevron-down", style="font-size:80%")

          - else groupClass = "ungroupedClass"

          //- Output each dataset group as a list of checkboxes
          ul(class="#{groupClass} db-group", id="group-#{i}")
            -for (var j in group.dbs)
              -var db = group.dbs[j];
              li
                label
                  //- Dataset checkboxes are prepended with 'db-' to ensure no one starts their
                  //- dataset name with a non-letter (which would break HTML rules)
                  input(type="checkbox", name="db-#{db._id}", class="group-#{i}-checkbox group-checkbox")
                | &nbsp; #{db.title} &nbsp; (#{db.num_samples})
          br

      br(style="clear:both")

  hr()
  div(id="footer", class="text-left")
    p(style="text-align:center") Updated: February 2nd, 2014

  script(src='components/jquery/jquery.min.js')
  script(src='components/jquery-form/jquery.form.js')
  script(src="js/query-control.js")
